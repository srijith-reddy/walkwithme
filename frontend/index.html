<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Walk With Me</title>

<meta name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

<!-- PWA: Theme + App Name -->
<meta name="theme-color" content="#4f46e5" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="Walk With Me" />

<!-- Manifest -->
<link rel="manifest" href="manifest.json" />

<!-- Icons -->
<link rel="apple-touch-icon" href="icons/icon-192.png" />
<link rel="icon" type="image/png" href="icons/icon-192.png" />

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="styles.css" />
</head>

<body class="bg-gray-100 dark:bg-gray-900 dark:text-white">

<header class="p-4 bg-indigo-600 dark:bg-indigo-800 text-white text-center text-2xl font-bold">
  Walk With Me
</header>

<div class="p-4 bg-white dark:bg-gray-800 shadow-md flex flex-col gap-4">

  <button onclick="useMyLocation()" class="btn-green w-full">
    ğŸ“ Use My Location
  </button>

  <!-- START INPUT -->
  <div class="relative">
    <label class="text-sm font-semibold">Start (address or lat,lon)</label>
    <input id="startInput" class="input" placeholder="Enter addressâ€¦" autocomplete="off" />
    <input type="hidden" id="startInput_coords" />
    <div id="startSuggestions" class="autocomplete-box hidden"></div>
  </div>

  <!-- END INPUT -->
  <div class="relative">
    <label class="text-sm font-semibold">End (address or lat,lon)</label>
    <input id="endInput" class="input" placeholder="Enter addressâ€¦" autocomplete="off" />
    <input type="hidden" id="endInput_coords" />
    <div id="endSuggestions" class="autocomplete-box hidden"></div>
  </div>

  <div>
    <label class="text-sm font-semibold">Mode</label>
    <select id="modeSelect" class="input">
      <option value="shortest">Shortest</option>
      <option value="safe">Safe</option>
      <option value="scenic">Scenic</option>
      <option value="explore">Explore</option>
      <option value="best">AI Best</option>
      <option value="loop">Loop (no end)</option>
    </select>
  </div>

  <div class="flex gap-4">
    <button onclick="getRoute()" class="btn-primary">Get Route</button>
    <button onclick="exportGPX()" class="btn-secondary">Download GPX</button>
    <button onclick="getTrails()" class="btn-green">Find Trails</button>
  </div>

  <button onclick="toggleDarkMode()" class="btn-secondary w-full">
    ğŸŒ™ Toggle Dark Mode
  </button>
</div>

<!-- MAP -->
<div id="map" class="map"></div>

<!-- ELEVATION CHART -->
<div class="p-4 bg-white dark:bg-gray-800 mt-4">
  <canvas id="elevationChart"></canvas>
</div>

<!-- App Logic -->
<script src="app.js"></script>

<!-- Register service worker -->
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js")
    .then(() => console.log("SW registered"))
    .catch(err => console.error("SW failed", err));
}
</script>

</body>
</html>
